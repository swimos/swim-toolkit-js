<!DOCTYPE html>
<html>
  <head>
    <title>Swim Popover Placement</title>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, user-scalable=0, shrink-to-fit=no, viewport-fit=cover">
  </head>
  <body swim-theme style="display: flex; justify-content: center; align-items: center; width: 100vw; height: 100vh; margin: 0;">
    <script src="../../swim-runtime/swim-core/dist/swim-core.js"></script>
    <script src="../../swim-runtime/swim-host/dist/swim-host.js"></script>
    <script src="../swim-ui/dist/swim-ui.js"></script>
    <script src="../swim-ux/dist/swim-ux.js"></script>
    <script>

const bodyView = swim.HtmlView.fromNode(document.body);

const sourceView = bodyView.appendChild("div");
sourceView.position.setState("absolute");
sourceView.left.setState(Math.random() * window.innerWidth);
sourceView.top.setState(Math.random() * window.innerHeight);
sourceView.width.setState(100);
sourceView.height.setState(100);
sourceView.borderRadius(50);
sourceView.backgroundColor.setState("#989898");
sourceView.addEventListener("click", function (event) {
  bodyView.modal.toggle(popoverView);
});

const popoverView = swim.PopoverView.create();
popoverView.placement(["top", "bottom", "right", "left", "below"]);
popoverView.minWidth.setState(240);
popoverView.minHeight.setState(360);
popoverView.borderRadius(5);
popoverView.backgroundColor.setState("#4a4a4a");
popoverView.source.setView(sourceView);
popoverView.presence.dismiss(false);
bodyView.modal.present(popoverView);

//setInterval(function () {
//  const timing = swim.Easing.linear.withDuration(1000);
//  sourceView.left.setState(Math.random() * window.innerWidth, timing)
//  sourceView.top.setState(Math.random() * window.innerHeight, timing);
//}, 1000);

window.addEventListener("mousemove", function (event) {
  sourceView.left.setState(event.clientX - 50)
  sourceView.top.setState(event.clientY - 50);
});

    </script>
  </body>
</html>
